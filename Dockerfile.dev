# Simple Docker setup for local development
FROM node:18-alpine

# Install timezone data
RUN apk add --no-cache tzdata

# Set timezone (change America/New_York to your timezone)
ENV TZ=America/New_York
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./
COPY tsconfig.json ./

# Install dependencies
RUN npm ci

# Copy source code
COPY src/ ./src/
COPY .env* ./

# Create logs directory
RUN mkdir -p logs

# Install ts-node globally for running TypeScript directly
RUN npm install -g ts-node

# Default to running the simple bot
# You can override this with docker run command
CMD ["npm", "start"]

# Alternative commands you can use:
# CMD ["ts-node", "-r", "dotenv/config", "src/simple-trading-bot.ts"]
# CMD ["ts-node", "-r", "dotenv/config", "src/index.ts"]
# CMD ["npm", "run", "test-spx"]